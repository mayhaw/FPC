grepl("^[:alnum:_-]+$","9-$a_") #find rows thta have anything but
grepl("^[:alnum:_-]+$","9-a_") #find rows thta have anything but
grepl("^[:alnum:_-]+$","9-*a_") #find rows thta have anything but
grepl("^[:alnum:_-]+$","9-a_") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","9-a_") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","$9-a_") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","3") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_A") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_A$") #find rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_A├") #├│┬ªfind rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_A") #├│┬ªfind rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_A│") #├│┬ªfind rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_A┬") #├│┬ªfind rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_Aª") #├│┬ªfind rows thta have anything but
grepl("^[[:alnum:]_-]+$","3a-_A%") #├│┬ªfind rows thta have anything but
starts_with("(","a")
#So once everything's in the google drive folder, you can merge the meeting table info with the links.
#Therefore you will need this in a little bit as the think to merge onto:
pdf_links<-"Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres.csv"%>%
read.csv(encoding="UTF-8")
head(pdf_links)
pdf_links%>%subset(.,starts_with("("),vars=link_parent)
base::startsWith("(s","(")
read.csv(.,file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv")%>%
subset(!base::startsWith("(",link_target))%>%
head()
read.csv(.,file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv")%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith("(",link_target))%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith("(",link_target))%>%
wex()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(base::startsWith("(",link_target))%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(base::startsWith("(",aslink_target))%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(base::startsWith("(",.$link_target))%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith("(",.$link_target))%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith("(",.$link_target))%>%
pull(link_target)
(base::startsWith("(","(s"))
(base::startsWith("(s","(s"))
(base::startsWith("(s","(ss"))
(base::startsWith("(s","("))
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
pull(link_target)%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
wex()
wex()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(indyby==11)%>%
wex()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(indyby==11)%>%
write.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres22.csv")
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
head()
googledmerge2<-googledmerge%>%
mutate(.,name=gsub("-pdf\\.pdf$","-pdf",name)  )
# Input strings
strings <- c("13-nestor-ria├▒o-fisiologia-egrandis-pdf", "6_rw25-omisi├│n-de-nutrientes-y-materiales-gen├⌐ticos-egrandis-colombia-v1-pdf",
"a--pdf")
# Replace the special characters with their corresponding replacements
str_replace_all(strings, c(
'├▒'= "n" ,
"├í"="a",
'├⌐'="e",
'├│'="o",
'┬ª'="%c2%a6",
"--pdf"
))
# Replace the special characters with their corresponding replacements
str_replace_all(strings, c(
'├▒'= "n" ,
"├í"="a",
'├⌐'="e",
'├│'="o",
'┬ª'="%c2%a6",
"--pdf"="-pdf"
))
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
pull(linkbase)%>%
substr(.,1,nchar(.)-4)%>%
head()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
pull(linkbase)%>%
substr(.,1,nchar(.)-4)%>%
head()%>%
grepl(".",.)
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
pull(linkbase)%>%
substr(.,1,nchar(.)-4)%>%
head()%>%
grepl("\\.",.)
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
pull(linkbase)%>%
substr(.,1,nchar(.)-4)%>%
grepl("\\.",.)%>%dim()
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
pull(linkbase)%>%
substr(.,1,nchar(.)-4)%>%
grepl("\\.",.)%>%length
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
pull(linkbase)%>%
substr(.,1,nchar(.)-4)%>%
grepl("\\.",.)%>%print
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
subset(.,grepl("\\.",substr(linkbas,1,nchar(linkbase)-4)))
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
subset(.,grepl("\\.",substr(linkbase,1,nchar(linkbase)-4)))
googledmerge2%>%
subset(.,grepl("\\.",substr(linkbase,1,nchar(linkbase)-4)))
googledmerge2%>%
subset(.,grepl("\\.",substr(name,1,nchar(name)-4)))
googledmerge2%>%
subset(.,grepl("\\.",substr(name,1,nchar(name)-4)))%>%pull(name)
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
subset(.,grepl("\\.",substr(linkbase,1,nchar(linkbase)-4)))
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
subset(.,grepl(--"pdf",linkbase))
read.csv(file="Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-yearbyear-pres2.csv",header=T)%>%
subset(!base::startsWith(link_target,"("))%>%
select(c(indyby,linkbase,glink.f2,glink.mt,x))%>%
subset(.,grepl("--pdf",linkbase))
googledmerge2%>%
subset(.,grepl("--pdf",linkbase))
googledmerge2%>%
subset(.,grepl("--pdf",name))
subset(.,grepl("\\.",substr(name,1,nchar(name)-4)))%>%pull(name)
googledmerge2<-googledmerge%>%
mutate(.,name=gsub("-pdf\\.pdf$","-pdf",name)  )%>%
subset(.,grepl("\\.",substr(name,1,nchar(name)-4)))%>%pull(name)
googledmerge2<-googledmerge%>%
mutate(.,name=gsub("-pdf\\.pdf$","-pdf",name)  )
googledmerge2%>%
subset(.,grepl("\\.",substr(name,1,nchar(name)-4)))%>%pull(name)
source("Q:/My Drive/Studies/FPC/Scripts/datlibmgr.R")
#github-----
setwd("Q:/My Drive/Studies/FPC/Scripts")
load(.RData)
load(".RData")
pdlks51[1,]
wana(pdlks51)
#yea that;s gold
#lets see if i can coalse the youtube etc links and the gids
#
#d
#  mutate(.,link=ifelse(dirname%in%c("youtu.be","dropbox",NA),wplink,glink))#wp links for youtube, dropbox, and NA (no link on wp); but google links for wordpress-hosted stuff
dirname("https://forestproductivitycoop.net/wp-content/")
pdlks51%>%pull(link)%>%
dirname()%>%unique()
#yea that;s gold
#lets see if i can coalse the youtube etc links and the gids
#
#d
#  mutate(.,link=ifelse(dirname%in%c("youtu.be","dropbox",NA),wplink,glink))#wp links for youtube, dropbox, and NA (no link on wp); but google links for wordpress-hosted stuff
dirname("https://forestproductivitycoop.net/wp-content/")
dirname("http://forestproductivitycoop.net/wp-content/uploads/2014/08"     )
getwd()
setwd("http://forestproductivitycoop.net/publications/fpc-presentations/2004-advisory-council")
domain("http://forestproductivitycoop.net/wp-content/uploads/2014")
pdlks51%>%pull(link)%>%
domain()%>%unique()
pdlks51%>%
mutate(.,dm=domain(link))%>%
table(indyby~dm)
pdlks51%>%
mutate(.,dm=domain(link))%>%
with(.,table(indyby,dm))
pdlks51%>%
mutate(.,dm=domain(link))%>%
with(.,table(dm,indyby))
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
with(.,table(dm,ind))
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
subset(dm="www.dropbox.com")
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
subset(dm=="www.dropbox.com")
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up
with(.,table(dm,ind))
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up
subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are deleted files that i think i messed up
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up
subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are deleted files that i think i messed up
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up
#subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are obsolete and there are only 2
with(.,table(dm,ind))
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up; only 26 anyways
#subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are obsolete and there are only 2
subset(dm=="docs.google.com") #can get rid of these, they are obsolete and there are only 2
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up; only 26 anyways
#subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are obsolete and there are only 2
#subset(dm=="docs.google.com") #keep this, it still works
names()
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up; only 26 anyways
#subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are obsolete and there are only 2
#subset(dm=="docs.google.com") #keep this, it still works
with(.,table(dm,ind))
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up; only 26 anyways
#subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are obsolete and there are only 2
#subset(dm=="docs.google.com") #keep this, it still works
mutate(., linknew=#first make glinks out of any that have g ids
ifelse(!is.na(id),paste0("https://drive.google.com/open?id=",id),NA))%>%
mutate(.,linknew=coalesce(linknew,link))%>%
mutate(.,dm=domain(linknew),ind=1)%>%
with(.,table(dm,ind))
pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up; only 26 anyways
#subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are obsolete and there are only 2
#subset(dm=="docs.google.com") #keep this, it still works
mutate(., linknew=#first make glinks out of any that have g ids
ifelse(!is.na(id),paste0("https://drive.google.com/open?id=",id),NA))%>%
mutate(.,linknew=coalesce(linknew,link))%>%
mutate(.,dm=domain(linknew),ind=1)%>%
names()
bigcombo<-read.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-bigcombo.csv")
names(bigcombo)
bigcombo%>%
select(FPC.Meeting,FPC.Meeting2)%>%
unique()
names(bigcombo)
pdlks52<-pdlks51%>%
mutate(.,dm=domain(link),ind=1)%>%
#subset(dm=="www.dropbox.com") #can get rid of these, they are deleted files that i think i messed up; only 26 anyways
#subset(dm=="mymediasite.online.ncsu.edu") #can get rid of these, they are obsolete and there are only 2
#subset(dm=="docs.google.com") #keep this, it still works
mutate(., linknew=#first make glinks out of any that have g ids
ifelse(!is.na(id),paste0("https://drive.google.com/open?id=",id),NA))%>%
mutate(.,linknew=coalesce(linknew,link))%>%
mutate(.,dm=domain(linknew),ind=1)
#bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(names(.)[!names(.)%in%names(pdlks52)])%>%
names()
#bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
names()
pdlks52%>%names
#bigcombosm<-
bigcombo%>%
names()
#bigcombosm<-
bigcombo%>%
dim()
#bigcombosm<-
bigcombo%>%
pull(indyby)%>%unique()
#bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
names()
#bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby")%>%
dim()
#bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby")%>%
pull(indyby)%>%(pdlks52[!pdlks$indyby%in%.,])
#bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby")%>%
pull(indyby)->iv
pdlks52[!pdlks$indyby%in%iv]
pdlks52[!pdlks$indyby%in%iv,]
#bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby",all=T)%>%
dim
bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby",all=T)%>%
wana()
#now get the table that has all the meeting level info, not just the yearbyyear/presentation level info
bigcombo<-read.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/Events-past-bigcombo.csv")
#bigcombosm<-
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby",all=T)%>%
wana()
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby",all=T)%>%
arrange(as.numeric(indyby))%>%
write.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/meetingtablehtmllinkstargets_finalmaybe.csv",row.names = F)
#now get an second version that is like the goglesheet  meetingtablehtmllinkstargets.gsheet, "Q:\Shared drives\FER - FPC Team\Website\Htmltables\meetingtablehtmllinkstargets.gsheet", https://docs.google.com/spreadsheets/d/1Z1PGyYdzn5W2_jbypl1uwMoyb4XZ3oLKgGs94oZPmUM?usp=drive_fs
read.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/meetingtablehtmllinkstargets_finalmaybe.csv",header = T)%>%
names()
#so some last formatting thins and putt with the meeting info
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby",all=T)%>%
arrange(as.numeric(indyby))%>%
select(-c(ind,id,dm))%>%
write.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/meetingtablehtmllinkstargets_finalmaybe.csv",row.names = F)
#now get an second version that is like the goglesheet  meetingtablehtmllinkstargets.gsheet, "Q:\Shared drives\FER - FPC Team\Website\Htmltables\meetingtablehtmllinkstargets.gsheet", https://docs.google.com/spreadsheets/d/1Z1PGyYdzn5W2_jbypl1uwMoyb4XZ3oLKgGs94oZPmUM?usp=drive_fs
read.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/meetingtablehtmllinkstargets_finalmaybe.csv",header = T)%>%
names()
#now get an second version that is like the goglesheet  meetingtablehtmllinkstargets.gsheet, "Q:\Shared drives\FER - FPC Team\Website\Htmltables\meetingtablehtmllinkstargets.gsheet", https://docs.google.com/spreadsheets/d/1Z1PGyYdzn5W2_jbypl1uwMoyb4XZ3oLKgGs94oZPmUM?usp=drive_fs
twt<-  read.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/meetingtablehtmllinkstargets_finalmaybe.csv",header = T)
twt%>%select(c(Year,Location,Presentation,Presentation2,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker,Speaker))%>%
dim()
twt%>%select(c(Year,Location,Presentation,Presentation,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker,Speaker))%>%
dim()
twt%>%select(c(Year,Location,Presentation,Presentation,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker,Speaker))%>%
names()->tnam
names(twt)[!names(twt)%in%tnam]
twt$FPC.Meeting2%>%unique
#so some last formatting thins and putt with the meeting info
bigcombo%>%
rename("Date"=Date.yby,"target"=target.yby)%>%
select(indyby,names(.)[!names(.)%in%names(pdlks52)])%>%
select(-glink)%>%
merge(.,pdlks52,by="indyby",all=T)%>%
arrange(as.numeric(indyby))%>%
select(-c(ind,id,dm))%>%
write.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/meetingtablehtmllinkstargets.csv",row.names = F)
#now get an second version that is like the goglesheet  meetingtablehtmllinkstargets.gsheet, "Q:\Shared drives\FER - FPC Team\Website\Htmltables\meetingtablehtmllinkstargets.gsheet", https://docs.google.com/spreadsheets/d/1Z1PGyYdzn5W2_jbypl1uwMoyb4XZ3oLKgGs94oZPmUM?usp=drive_fs
twt<-  read.csv("Q:/Shared drives/FER - FPC Team/Website/Htmltables/meetingtablehtmllinkstargets.csv",header = T)
#Ok now read it back in to select only the columns that go in the googlesheet;
twt%>%select(c(FPC.Meeting2,Year,Location,Presentation,Presentation,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker,Speaker))%>%
dim()
c(FPC.Meeting2,Year,Location,Presentation,Presentation,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker,Speaker)
twt%>%select(indmain,indmain)%>%dim()
#Ok now read it back in to select only the columns that go in the googlesheet;
twt%>%
mutate(Presentation2=Presentation)%>%#make a placeholder copy bc the googlesheet has a linked version of the same column
mutate(Speaker.list="")%>%
rename("Speaker.old"=Speaker)%>%
select(c(FPC.Meeting2,Year,Location,Presentation,Presentation,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker,Speaker))%>%
dim()
#Ok now read it back in to select only the columns that go in the googlesheet;
twt%>%
mutate(Presentation2=Presentation)%>%#make a placeholder copy bc the googlesheet has a linked version of the same column
mutate(Speaker.list="")%>% #another plaeholder for eventual list??
rename("Speaker.old"=Speaker)%>% #these need to be tidied up but leaving them in as old speaker bc its the only place that info exists now
select(c(FPC.Meeting2,Year,Location,Presentation,Presentation2,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker.list,Speaker.oldf))%>%
dim()
#Ok now read it back in to select only the columns that go in the googlesheet;
twt%>%
mutate(Presentation2=Presentation)%>%#make a placeholder copy bc the googlesheet has a linked version of the same column
mutate(Speaker.list="")%>% #another plaeholder for eventual list??
rename("Speaker.old"=Speaker)%>% #these need to be tidied up but leaving them in as old speaker bc its the only place that info exists now
select(c(FPC.Meeting2,Year,Location,Presentation,Presentation2,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker.list,Speaker.old))%>%
dim()
#Ok now read it back in to select only the columns that go in the googlesheet;
twt%>%
mutate(Presentation2=Presentation)%>%#make a placeholder copy bc the googlesheet has a linked version of the same column
mutate(Speaker.list="")%>% #another plaeholder for eventual list??
rename("Speaker.old"=Speaker)%>% #these need to be tidied up but leaving them in as old speaker bc its the only place that info exists now
select(c(FPC.Meeting2,Year,Location,Presentation,Presentation2,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker.list,Speaker.old))%>%
left()%>%names()
#Ok now read it back in to select only the columns that go in the googlesheet;
twt%>%
mutate(Presentation2=Presentation)%>%#make a placeholder copy bc the googlesheet has a linked version of the same column
mutate(Speaker.list="")%>% #another plaeholder for eventual list??
rename("Speaker.old"=Speaker)%>% #these need to be tidied up but leaving them in as old speaker bc its the only place that info exists now
mutate(Speaker="")%>% #another plaeholder bc i want to have 1 speaker in this column
select(c(FPC.Meeting2,Year,Location,Presentation,Presentation2,Speaker,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker.list,Speaker.old))%>%
left()%>%names()
#Ok now read it back in to select only the columns that go in the googlesheet;
twt%>%
mutate(Presentation2=Presentation)%>%#make a placeholder copy bc the googlesheet has a linked version of the same column
mutate(Speaker.list="")%>% #another plaeholder for eventual list??
rename("Speaker.old"=Speaker)%>% #these need to be tidied up but leaving them in as old speaker bc its the only place that info exists now
mutate(Speaker="")%>% #another plaeholder bc i want to have 1 speaker in this column
select(c(FPC.Meeting2,Year,Location,Presentation,Presentation2,Speaker,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker.list,Speaker.old))%>%
wex()
warnings()
is.package("googlesheets4")
is_installed("googlesheets4")
gs4_auth()
#see here are the columns in the gsheet as of 11/12/23
#  Meeting Type	Year	Location	Presentation	Presentation2	Speaker	glink	Date.main	Date.yby	Time	indmain	indyby	FPC.Meeting	Presentation.concat	target.yby	Speaker.list	Speaker.old
#so now lets make a connection to the main gsheet the .org meetings table links to:
mtb<- read_sheet("https://docs.google.com/spreadsheets/d/1Z1PGyYdzn5W2_jbypl1uwMoyb4XZ3oLKgGs94oZPmUM/edit#gid=0")
#Ok now read it back in to select only the columns that go in the googlesheet;
twtf%>%
mutate(Presentation2=Presentation)%>%#make a placeholder copy bc the googlesheet has a linked version of the same column
mutate(Speaker.list="")%>% #another plaeholder for eventual list??
rename("Speaker.old"=Speaker)%>% #these need to be tidied up but leaving them in as old speaker bc its the only place that info exists now
mutate(Speaker="")%>% #another plaeholder bc i want to have 1 speaker in this column
select(c(FPC.Meeting2,Year,Location,Presentation,Presentation2,Speaker,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker.list,Speaker.old))
#Ok now read it back in to select only the columns that go in the googlesheet;
twtf<-twt%>%
mutate(Presentation2=Presentation)%>%#make a placeholder copy bc the googlesheet has a linked version of the same column
mutate(Speaker.list="")%>% #another plaeholder for eventual list??
rename("Speaker.old"=Speaker)%>% #these need to be tidied up but leaving them in as old speaker bc its the only place that info exists now
mutate(Speaker="")%>% #another plaeholder bc i want to have 1 speaker in this column
select(c(FPC.Meeting2,Year,Location,Presentation,Presentation2,Speaker,linknew,Date.main,Date,Time,indmain,indyby,FPC.Meeting,Presentation.concat,target,Speaker.list,Speaker.old))
sheet_write(twtf, mtb, sheet = "meetingtablehtmllinkstargets")
sheet_write(twtf, mtb, sheet = "meetingtablehtmllinkstargets")
#note this just leaves out  "linkbase"      "linkparent"   "link"          "Working.Group"; dont need these for the website
#see here are the columns in the gsheet as of 11/12/23:
#  Meeting Type	Year	Location	Presentation	Presentation2	Speaker	glink	Date.main	Date.yby	Time	indmain	indyby	FPC.Meeting	Presentation.concat	target.yby	Speaker.list	Speaker.old
#so now lets make a connection to the main gsheet the .org meetings table links to:
mtb<- ("https://docs.google.com/spreadsheets/d/1Z1PGyYdzn5W2_jbypl1uwMoyb4XZ3oLKgGs94oZPmUM/edit#gid=0")
sheet_write(twtf, mtb, sheet = "meetingtablehtmllinkstargets")
wana
#subs<-
twt%>%
subset(!linknew=="")%>%
dim()
subs<-
twt%>%
subset(!linknew=="")%>%#just want ones with linkes
split(.,.$indmain)%>%
lapply(.,function(x)
{slice_sample(x,n=2)}
)
rbindlist(subs,idcol = "indmain")%>%
wana()
getwd()
#Wbesite table Final steps are some QC========------
#make a random subset of the meetings pres that has two links per meeting (for meetings with links)
setwd("Q:/Shared drives/FER - FPC Team/Website/Htmltables/")
rbindlist(subs,idcol = "indmain")%>%
write.csv("meetingtablehtmllinkstargets_randomsubsetdelete.csv")
rbindlist(subs,idcol = "indmain")%>%
head()
#github-----
setwd("Q:/My Drive/Studies/FPC/Scripts")
#numbers 1-10 letters a-l:-----
outer(c(letters[1:12]),c(1:10),FUN=function(x,y){paste0(x,y)})%>%
head()
